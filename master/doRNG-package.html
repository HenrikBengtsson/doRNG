<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>doRNG-package. doRNG 1.6</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="
  Renaud Gaujoux &lt;a href='mailto:renaud@cbio.uct.ac.za'&gt;renaud@cbio.uct.ac.za&lt;/a&gt;,

  Maintainer: Renaud Gaujoux &lt;a href='mailto:renaud@cbio.uct.ac.za'&gt;renaud@cbio.uct.ac.za&lt;/a&gt;,
">

<!-- bootstrap css -->
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<!-- highlighting css -->
<link href="css/highlight.css" rel="stylesheet">
<!-- custom css -->
<link href="css/staticdocs.css" rel="stylesheet">
<!-- knitr files -->
<script src="js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- bootstrap javascript -->
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<!-- d3 word cloud -->
<script src="js/d3.v3.min.js"></script>
<script src="js/d3.layout.cloud.js"></script>
  </head>

  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="index.html">doRNG</a>
  </div>

  <!-- Collect the nav links, forms, and other content for toggling -->
  <div class="collapse navbar-collapse navbar-ex1-collapse">
    <ul class="nav navbar-nav">
	  <li><a href="PAGE-MAN.html"><span class="glyphicon glyphicon-home"></span> Index</a></li>
    </ul>
    <!-- <form class="navbar-form navbar-left" role="search">
      <div class="form-group">
        <input type="text" class="form-control" placeholder="Search">
      </div>
      <button type="submit" class="btn btn-default">Submit</button>
    </form>--> 
    <ul class="nav navbar-nav navbar-right">
      <li><p class="navbar-text">
      <span style="font-size:14px" class="label label-primary">Version&nbsp;1.6</span>
      &nbsp;</p></li>
    </ul>
  </div><!-- /.navbar-collapse -->
</nav>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Generic Reproducible Parallel Backend for foreach Loops</h1>

<div class="row">
  <div class="span8">
    <div class="description">
      <h2>Description</h2>
      
      <p><p>The <em>doRNG</em> package provides functions to perform
  reproducible parallel foreach loops, using independent
  random streams as generated by L'Ecuyer's combined
  multiple-recursive generator [L'Ecuyer (1999)]. It
  enables to easily convert standard 
  fully reproducible loops, independently of the number of
  workers, the task scheduling strategy, or the chosen
  parallel environment and associated foreach backend. It
  has been tested with the following foreach backend: doMC,
  doSNOW, doMPI.</p></p>
  
    </div>
    
    
    
    <div class="Details">
      <h2>Details</h2>
      
      <p><table><tr><td> Package: </td>
<td> doRNG</td>
</tr><tr><td> Type: </td>
<td>
  Package</td>
</tr><tr><td> Version: </td>
<td> 1.2.3</td>
</tr><tr><td> Date: </td>
<td>
  2012-03-30</td>
</tr><tr><td> License: </td>
<td> GPL (>= 2)</td>
</tr><tr><td> LazyLoad: </td>
<td>
  yes</td>
</tr></table></p>
  
    </div>

    <div class="References">
      <h2>References</h2>
      
      <p>L'Ecuyer P (1999). "Good parameters and implementations
  for combined multiple recursive random number
  generators." _Operations Research_, *47*(1). <URL:
  http://www.jstor.org/stable/10.2307/222902>.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre><code class="r">
## Don&#39;t show: 
# roxygen generated flag
options(R_CHECK_RUNNING_EXAMPLES_=TRUE)
## End Don&#39;t show

# register parallel backend
library(doParallel)
</code></pre>

<pre><code>## Loading required package: iterators
## Loading required package: parallel
</code></pre>

<pre><code class="r">cl &lt;- makeCluster(2)
registerDoParallel(cl)

## standard %dopar% loop are not reproducible
set.seed(123)
r1 &lt;- foreach(i=1:4) %dopar%{ runif(1) }
set.seed(123)
r2 &lt;- foreach(i=1:4) %dopar%{ runif(1) }
identical(r1, r2)
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<pre><code class="r">## Don&#39;t show: 
 stopifnot(!identical(r1, r2)) 
## End Don&#39;t show

## %dorng% loops _are_ reproducible
set.seed(123)
r1 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
set.seed(123)
r2 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
identical(r1, r2)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">## Don&#39;t show: 
 stopifnot(identical(r1, r2)) 
## End Don&#39;t show

# alternative way of seeding
a1 &lt;- foreach(i=1:4, .options.RNG=123) %dorng%{ runif(1) }
a2 &lt;- foreach(i=1:4, .options.RNG=123) %dorng%{ runif(1) }
identical(a1, a2) &amp;&amp; identical(a1, r1)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">## Don&#39;t show: 
 stopifnot(identical(a1, a2) &amp;&amp; identical(a1, r1)) 
## End Don&#39;t show

## sequences of %dorng% loops _are_ reproducible
set.seed(123)
s1 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
s2 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
identical(s1, r1) &amp;&amp; !identical(s1, s2)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">## Don&#39;t show: 
 stopifnot(identical(s1, r1) &amp;&amp; !identical(s1, s2)) 
## End Don&#39;t show

set.seed(123)
s1.2 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
s2.2 &lt;- foreach(i=1:4) %dorng%{ runif(1) }
identical(s1, s1.2) &amp;&amp; identical(s2, s2.2)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">## Don&#39;t show: 
 stopifnot(identical(s1, s1.2) &amp;&amp; identical(s2, s2.2)) 
## End Don&#39;t show

## Non-invasive way of converting %dopar% loops into reproducible loops
registerDoRNG(123)
s3 &lt;- foreach(i=1:4) %dopar%{ runif(1) }
s4 &lt;- foreach(i=1:4) %dopar%{ runif(1) }
identical(s3, s1) &amp;&amp; identical(s4, s2)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">## Don&#39;t show: 
 stopifnot(identical(s3, s1) &amp;&amp; identical(s4, s2)) 
## End Don&#39;t show

stopCluster(cl)

</code></pre>

  </div>
  <div class="span4">
    <!-- <ul>
      <li>doRNG-package</li>
    </ul>
    <ul>
      <li>package</li>
    </ul> -->
      
    <h2>See also</h2>
    
  <code><a href='infoDoRNG.html'>doRNG</a></code>, <code><a href='http://www.inside-r.org/r-doc/rngtools/RNGseq'>RNGseq</a></code>

    
    <h2>Author</h2>
    
  Renaud Gaujoux <a href='mailto:renaud@cbio.uct.ac.za'>renaud@cbio.uct.ac.za</a>,

  Maintainer: Renaud Gaujoux <a href='mailto:renaud@cbio.uct.ac.za'>renaud@cbio.uct.ac.za</a>,

    
  </div>
</div>
      
      <footer>
      
<p>Built by <a href="https://github.com/renozao/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>